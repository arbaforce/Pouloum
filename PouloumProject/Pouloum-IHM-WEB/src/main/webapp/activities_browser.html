<!DOCTYPE html>
<html lang="fr">
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
        <link rel='stylesheet' type='text/css' href='STYLE/newhtml.css'>
    </head>
    <body>
        <div id="wrapper" class="container-fluid">
            <div id="container_navbar_and_alert" class="container-fluid mt-1" style="height: 15vh">
                <script src="SCRIPT/navbar_template.js"></script>
            </div> <!--#container_navbar_and_alert -->
            
            <div id="container_activities_tree" class="container-fluid h-100 w-100">
                <div class="row">
                    <h2 class="text-left">Activités</h2>
                </div>
                
                <div class="accordion" id="activities_tree">
                    
                    <!--<div class="card" id="card_elmt_1">
                        <div class="card-header" id="head_elmt_1">
                            <h2 class="mb-0">
                                <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#elmt_1" aria-expanded="true" aria-controls="collapseOne">
                                    Activité physique
                                </button>
                            </h2>
                        </div>
                        <div id="elmt_1" class="collapse show" aria-labelledby="head_elmt_1" data-parent="#activities_tree">
                            <div class="card-body">
                                <div class="card" id="card_elmt_1_1">
                                    <div class="card-header" id="head_elmt_1_1">
                                        <h2 class="mb-0">
                                            <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#elmt_1_1" aria-expanded="true" aria-controls="elmt_1_1">
                                                Sports de Combat
                                            </button>
                                        </h2>
                                    </div>

                                    <div id="elmt_1_1" class="collapse show" aria-labelledby="head_elmt_1_1" data-parent="#card_elmt_1_1">
                                        <div class="card-body">
                                            D'autres étages de l'arbre selon le meme principe pour représenter les enfants de "Sports de combat".
                                        </div>
                                    </div>
                                </div><!--#card_elmt_1_1- ->
                                <div class="card" id="card_elmt_1_2">
                                    <div class="card-header" id="head_elmt_1_2">
                                        <h2 class="mb-0">
                                            <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#" aria-expanded="true" >
                                                Sports d'équipe
                                            </button>
                                        </h2>
                                    </div>
                                </div><!--#card_elmt_1_2- ->
                            </div>
                        </div>
                    </div><!--#card_elmt_1- ->
                    <div class="card" id="card_elmt_2">
                        <div class="card-header" id="head_elmt_2">
                            <h2 class="mb-0">
                                <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#elmt_2" aria-expanded="false" aria-controls="elmt_2">
                                    Activité culturelle
                                </button>
                            </h2>
                        </div>
                        <div id="elmt_2" class="collapse" aria-labelledby="head_elmt_2" data-parent="#activities_tree">
                            <div class="card-body">
                                D'autres étages de l'arbre selon le meme principe pour représenter les enfants de "Activité culturelle".
                            </div>
                        </div>
                    </div> -->
                    
                </div><!-- "activities_tree-->
                
            
            </div> <!--#container_activities_tree-->
        </div><!--#wrapper-->
        
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
        <script src="SCRIPT/activities_browser.js"></script>
        <script>
            $(document).ready(function() {
                var userID ;
                
                $.ajax({
                    url: './AjaxAction',
                    type: 'POST',
                    data: {
                        'action': 'getActivityTree',
                    },
                    datatype: 'json'
                }).done(function (data){
                    var activities = data.activities;
                    var fulldiv = getAllActivityDiv(activities);
                    //$('#activities_list').append(fulldiv);
                    $('#activities_tree').append(fulldiv);
                }).fail(function(){
                    $('#message').empty();
                    $('#message').html('Echec du chargement des activités');
                });
                
                $.ajax({
                    url: './AjaxAction',
                    type: 'POST',
                    data: {
                        'action': 'getUserIdSession',
                    },
                    datatype: 'json'
                }).done(function (data){
                    if(data.result){
                        userID = data.userID;
                    }
                    else {
                        window.location.href = './index.html';
                    }
                });
            });
        </script>
    </body>
</html>
